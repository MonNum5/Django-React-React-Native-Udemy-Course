(this["webpackJsonpmovie-rater"]=this["webpackJsonpmovie-rater"]||[]).push([[0],{32:function(e,t,n){e.exports=n(47)},37:function(e,t,n){},38:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(26),c=n.n(r),i=(n(37),n(16)),l=n(2),u=(n(38),n(5)),m=n(6),s=n(27),d=n(28),h=function(){function e(){Object(s.a)(this,e)}return Object(d.a)(e,null,[{key:"updateMovie",value:function(e,t,n){return fetch("".concat("https://movie-rater-01.herokuapp.com","/api/movies/").concat(e,"/"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(n)},body:JSON.stringify(t)}).then((function(e){return e.json()}))}},{key:"createMovie",value:function(e,t){return fetch("".concat("https://movie-rater-01.herokuapp.com","/api/movies/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(t)},body:JSON.stringify(e)}).then((function(e){return e.json()}))}},{key:"deleteMovie",value:function(e,t){return fetch("".concat("https://movie-rater-01.herokuapp.com","/api/movies/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(t)}})}},{key:"getMovies",value:function(e){return fetch("".concat("https://movie-rater-01.herokuapp.com","/api/movies/"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}}).then((function(e){return e.json()}))}},{key:"loginUser",value:function(e){return fetch("".concat("https://movie-rater-01.herokuapp.com","/auth/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))}},{key:"registerUser",value:function(e){return console.log(e),fetch("".concat("https://movie-rater-01.herokuapp.com","/api/users/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))}}]),e}(),v=n(48);var p=function(e){var t=function(t){return function(n){e.movieClicked(t)}},n=Object(v.a)(["mr-token"]),a=Object(l.a)(n,1)[0];return o.a.createElement("div",null,e.movies&&e.movies.map((function(n){return o.a.createElement("div",{key:n.id,className:"movie-item"},o.a.createElement("h2",{onClick:t(n)}," ",n.title," "),o.a.createElement(u.a,{icon:m.a,onClick:function(){return function(t){e.editClicked(t)}(n)}}),o.a.createElement(u.a,{icon:m.e,onClick:function(){return function(t){h.deleteMovie(t.id,a["mr-token"]).then((function(){return e.removeClicked(t)})).catch((function(e){return console.log(e)}))}(n)}}))})))};var f=function(e){var t=Object(v.a)(["mr-token"]),n=Object(l.a)(t,1)[0],r=Object(a.useState)(-1),c=Object(l.a)(r,2),s=c[0],d=c[1],h=function(e){return function(t){d(e)}},p=function(){fetch("".concat("https://movie-rater-01.herokuapp.com","/").concat(e.movie.id,"/"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(n["mr-token"])}}).then((function(e){return e.json()})).then((function(t){return e.updateMovie(t)})).catch((function(e){return console.log(e)}))};return o.a.createElement("div",null,e.movie?o.a.createElement("div",null,o.a.createElement("h1",null,e.movie.title),o.a.createElement("p",null,e.movie.description),o.a.createElement("div",null,o.a.createElement(u.a,{icon:m.d,className:e.movie.avg_rating>0?"orange":""}),o.a.createElement(u.a,{icon:m.d,className:e.movie.avg_rating>1?"orange":""}),o.a.createElement(u.a,{icon:m.d,className:e.movie.avg_rating>2?"orange":""}),o.a.createElement(u.a,{icon:m.d,className:e.movie.avg_rating>3?"orange":""}),o.a.createElement(u.a,{icon:m.d,className:e.movie.avg_rating>4?"orange":""}),"(",e.movie.no_of_ratings,")"),o.a.createElement("div",{className:"rate-container"},o.a.createElement("h2",null,"Rate it"),Object(i.a)(Array(5)).map((function(t,a){return o.a.createElement(u.a,{key:a,icon:m.d,className:s>a-1?"purple":"",onMouseEnter:h(a),onMouseLeave:h(-1),onClick:(r=a,function(t){fetch("".concat("https://movie-rater-01.herokuapp.com","/api/movies/").concat(e.movie.id,"/rate_movie/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(n["mr-token"])},body:JSON.stringify({stars:r+1})}).then((function(e){return e.json()})).then((function(e){return p()})).catch((function(e){return console.log(e)}))})});var r})))):null)};var E=function(e){var t=Object(v.a)(["mr-token"]),n=Object(l.a)(t,1)[0],r=Object(a.useState)(""),c=Object(l.a)(r,2),i=c[0],u=c[1],m=Object(a.useState)(""),s=Object(l.a)(m,2),d=s[0],p=s[1];Object(a.useEffect)((function(){u(e.movie.title),p(e.movie.description)}),[e.movie]);var f=0===i.length||0===d.length;return o.a.createElement(o.a.Fragment,null,e.movie?o.a.createElement("div",null,o.a.createElement("label",{id:"title",htmlFor:"title"}," Title "),o.a.createElement("br",null),o.a.createElement("input",{id:"title",type:"text",palceholder:"title",value:i,onChange:function(e){return u(e.target.value)}}),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"description"},"Description"),o.a.createElement("br",null),o.a.createElement("textarea",{type:"text",id:"description",palceholder:"Description",value:d,onChange:function(e){return p(e.target.value)}}),o.a.createElement("br",null),e.movie.id?o.a.createElement("button",{onClick:function(t){h.updateMovie(e.movie.id,{title:i,description:d},n["mr-token"]).then((function(t){return e.updatedMovie(t)})).catch((function(e){return console.log(e)}))},disabled:f},"Update"):o.a.createElement("button",{onClick:function(t){h.createMovie({title:i,description:d},n["mr-token"]).then((function(t){return e.movieCreated(t)})).catch((function(e){return console.log(e)}))},disabled:f},"Create")):null)},b=n(21),g=n.n(b),j=n(29);var k=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),s=Object(l.a)(c,2),d=s[0],b=s[1],k=Object(a.useState)(null),O=Object(l.a)(k,2),y=O[0],C=O[1],w=Object(v.a)(["mr-token"]),T=Object(l.a)(w,3),S=T[0],N=(T[1],T[2]),M=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(!0),c=Object(l.a)(r,2),i=c[0],u=c[1],m=Object(a.useState)(),s=Object(l.a)(m,2),d=s[0],p=s[1],f=Object(v.a)(["mr-token"]),E=Object(l.a)(f,1)[0];return Object(a.useEffect)((function(){function e(){return(e=Object(j.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),p(),e.next=4,h.getMovies(E["mr-token"]).catch((function(e){return p(e)}));case 4:t=e.sent,o(t),u(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),[n,i,d]}(),A=Object(l.a)(M,3),x=A[0],_=A[1],J=A[2];return Object(a.useEffect)((function(){S["mr-token"]||(window.location.href="/")}),[S]),Object(a.useEffect)((function(){console.log(x),r(x)}),[x]),_?o.a.createElement("h1",null,"Loading...."):J?o.a.createElement("h1",null," Error "):o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("h1",null,o.a.createElement(u.a,{icon:m.b}),o.a.createElement("span",null,"Movie Rater"))),o.a.createElement(u.a,{onClick:function(){N(["mr-token"]),window.location.href="/movies"},icon:m.c}),o.a.createElement("div",{className:"layout"},o.a.createElement("div",null,o.a.createElement(p,{movies:n,movieClicked:function(e){b(e),C(null)},editClicked:function(e){C(e),b(null)},removeClicked:function(e){var t=n.filter((function(t){return t.id!==e.id}));r(t)}}),o.a.createElement("button",{onClick:function(){C({title:"",description:""}),b(null)}},"New movie")),o.a.createElement(f,{movie:d,updateMovie:function(e){b(e)}}),y?o.a.createElement(E,{movie:y,updatedMovie:function(e){var t=n.map((function(t){return t.id===e.id?e:t}));r(t)},movieCreated:function(e){var t=[].concat(Object(i.a)(n),[e]);console.log(t),r(t)}}):null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=n(30),y=n(3);var C=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(l.a)(c,2),u=i[0],m=i[1],s=Object(a.useState)(!0),d=Object(l.a)(s,2),p=d[0],f=d[1],E=Object(v.a)(["mr-token"]),b=Object(l.a)(E,2),g=b[0],j=b[1],k=function(){h.loginUser({username:n,password:u}).then((function(e){return j("mr-token",e.token)})).catch((function(e){return console.log(e)}))};Object(a.useEffect)((function(){g["mr-token"]&&(window.location.href="/movies")}),[g]);var O=0===n.length||0===u.length;return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},p?o.a.createElement("h1",null,"Login"):o.a.createElement("h1",null,"Register")),o.a.createElement("div",{className:"login-container"},o.a.createElement("label",{id:"username",htmlFor:"username"}," Username "),o.a.createElement("br",null),o.a.createElement("input",{id:"username",type:"text",palceholder:"username",value:n,onChange:function(e){return r(e.target.value)}}),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("br",null),o.a.createElement("input",{type:"password",id:"password",palceholder:"Password",value:u,onChange:function(e){return m(e.target.value)}}),o.a.createElement("br",null),p?o.a.createElement("h1",null,o.a.createElement("button",{onClick:function(e){return k()},disabled:O},"Login")):o.a.createElement("button",{onClick:function(e){h.registerUser({username:n,password:u}).then((function(){return k()})).catch((function(e){return console.log(e)}))}},"Register"),p?o.a.createElement("p",{onClick:function(){return f(!1)},disabled:O}," Yout don't have an account? Register here! "):o.a.createElement("p",{onClick:function(){return f(!0)}}," Yout already have an account? Login here! ")))},w=n(49);function T(){return o.a.createElement(o.a.StrictMode,null,o.a.createElement(w.a,null,o.a.createElement(O.a,null,o.a.createElement(y.a,{exact:!0,path:"/",component:C}),o.a.createElement(y.a,{exact:!0,path:"/movies",component:k}))))}c.a.render(o.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.73ddf157.chunk.js.map